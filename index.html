<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Your French - Quiz Interactif</title>
    
    <!-- Meta tags PWA -->
    <meta name="theme-color" content="#111f46">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Test Your French">
    
    <!-- Manifeste PWA -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Ic√¥nes -->
    <link rel="icon" href="icons/icon-72x72.png" type="image/png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Font Awesome pour les ic√¥nes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="quiz-container">
        <!-- √âcran d'accueil -->
        <div id="welcome-screen" class="screen fade-in">
            <!-- Ajout du logo -->
            <div class="quiz-logo">
                <img src="icons/icon-192x192.png" alt="Test Your French Logo">
            </div>
            <h1>Test Your French</h1>
            <p class="subtitle">D√©couvrez votre niveau de fran√ßais en quelques minutes !</p>
            <div class="test-details">
                <div class="detail-item"><i class="fas fa-check"></i> Grammaire & Vocabulaire</div>
                <div class="detail-item"><i class="fas fa-check"></i> Compr√©hension</div>
                <div class="detail-item"><i class="fas fa-check"></i> Expressions idiomatiques</div>
            </div>
            <div class="mt-6 px-4">
                <p>Ce quiz contient <span id="question-count">0</span> questions √† choix multiples.</p>
                <p>D√©fiez-vous et partagez votre score avec vos amis !</p>
            </div>
            <div class="timer-option">
                <label class="flex-center">
                    <input type="checkbox" id="enable-timer" checked>
                    <span>Activer le chronom√®tre pour plus de challenge</span>
                </label>
            </div>
            <button id="start-btn" class="btn" aria-label="Commencer le quiz">
                <i class="btn-icon fas fa-play"></i>Commencer le Quiz
            </button>
        </div>
        
        <!-- √âcran du Quiz -->
        <div id="quiz-screen" class="hidden">
            <h1>Quiz de Fran√ßais</h1>
            
            <div class="timer-container" id="timer-display">
                <div class="timer" aria-live="polite">
                    <i class="fas fa-clock"></i>
                    <span id="timer-value">00:00</span>
                </div>
                <button class="timer-toggle" id="timer-toggle" aria-label="Masquer le chronom√®tre">
                    <i class="fas fa-eye-slash"></i>
                </button>
            </div>
            
            <div class="progress-container" aria-label="Progression du quiz">
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="progress-steps" id="progress-steps" aria-hidden="true">
                    <!-- Les √©tapes seront ajout√©es ici dynamiquement -->
                </div>
            </div>
            
            <div id="quiz" role="form">
                <!-- Les questions seront ajout√©es ici dynamiquement -->
            </div>
            
            <div id="feedback" class="feedback-container" aria-live="polite">
                <!-- Le feedback sera ajout√© ici dynamiquement -->
            </div>
            
            <div class="buttons">
                <div class="button-group">
                    <button id="prev-btn" class="btn btn-secondary" disabled aria-label="Question pr√©c√©dente">
                        <i class="fas fa-arrow-left btn-icon"></i>Pr√©c√©dent
                    </button>
                </div>
                <div class="button-group">
                    <button id="next-btn" class="btn" disabled aria-label="Question suivante">
                        Suivant<i class="fas fa-arrow-right" style="margin-left: 8px;"></i>
                    </button>
                    <button id="submit-btn" class="btn" style="display: none;" aria-label="Terminer le quiz">
                        R√©sultats<i class="fas fa-flag-checkered" style="margin-left: 8px;"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- √âcran des R√©sultats -->
        <div id="result" class="result-container">
            <h1>R√©sultats du Quiz</h1>
            <div class="score-highlight" aria-live="polite">
                <span id="score">0</span>/<span id="total-questions">0</span>
            </div>
            
            <div id="score-message" aria-live="polite"></div>
            
            <!-- Stats container -->
            <div class="stats-container fade-in">
                <h2>Votre Performance</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="accuracy">0%</div>
                        <div class="stat-label">Pr√©cision</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="avg-time">0s</div>
                        <div class="stat-label">Temps moyen par question</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="fastest-answer">0s</div>
                        <div class="stat-label">R√©ponse la plus rapide</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="slowest-answer">0s</div>
                        <div class="stat-label">R√©ponse la plus longue</div>
                    </div>
                </div>
            </div>
            
            <!-- Section CTAs -->
            <div class="cta-container fade-in">
                <h3 class="text-center mb-4">Continuez votre progression en fran√ßais</h3>
                <div class="cta-buttons">
                    <a href="https://testyourfrench.com/french-tests-bundle/" target="_blank" class="cta-button primary">
                        <span class="cta-icon">üîç</span>
                        <div class="cta-content">
                            <span class="cta-title">Quiz Complet de Fran√ßais</span>
                            <span class="cta-desc">Testez vraiment votre niveau avec notre pack complet de tests</span>
                        </div>
                        <span class="cta-arrow">‚Üí</span>
                    </a>
                    <a href="https://testyourfrench.com/travel-to-france-essentials-bundle/" target="_blank" class="cta-button secondary">
                        <span class="cta-icon">üóº</span>
                        <div class="cta-content">
                            <span class="cta-title">Guide Essentiel de Paris</span>
                            <span class="cta-desc">Tout ce qu'il faut savoir pour votre voyage √† Paris</span>
                        </div>
                        <span class="cta-arrow">‚Üí</span>
                    </a>
                    <a href="https://onlinenewsletter.kit.com/products/10-things-french-b1-exam" target="_blank" class="cta-button tertiary">
                        <span class="cta-icon">üéì</span>
                        <div class="cta-content">
                            <span class="cta-title">Pr√©parez votre B1</span>
                            <span class="cta-desc">Les 10 cl√©s pour r√©ussir l'examen B1 de fran√ßais</span>
                        </div>
                        <span class="cta-arrow">‚Üí</span>
                    </a>
                </div>
            </div>
            
            <div id="summary-container" class="summary-container fade-in">
                <h2>D√©tail des r√©ponses</h2>
                <div id="answers-summary">
                    <!-- Le r√©sum√© des r√©ponses sera ajout√© ici dynamiquement -->
                </div>
            </div>
            
            <div id="certificate" class="certificate hidden fade-in">
                <h2>Certificat de R√©ussite</h2>
                <div class="certificate-content">
                    <p>Ce certificat atteste que</p>
                    <div class="certificate-name" id="participant-name">Participant</div>
                    <p>a compl√©t√© le quiz de fran√ßais avec un score de</p>
                    <div class="certificate-score"><span id="certificate-score">0</span>/<span id="certificate-total">0</span></div>
                    <p class="certificate-date">Date: <span id="certificate-date"></span></p>
                </div>
            </div>
            
            <div class="social-share fade-in">
                <p class="social-share-title">Partagez votre score :</p>
                <div class="copyable-text-container">
                    <textarea id="share-text" class="copyable-text" readonly>Just took this French quiz and got [SCORE]/[TOTAL]! üá´üá∑ Think you can beat my score? Try it here üëâ www.testyourfrench.com #FrenchChallenge #TestYourSkills</textarea>
                    <button id="copy-btn" class="btn btn-sm">
                        <i class="fas fa-copy"></i> Copier
                    </button>
                </div>
            </div>
            
            <div class="buttons">
                <div class="button-group">
                    <button id="restart-btn" class="btn btn-success" aria-label="Recommencer le quiz">
                        <i class="fas fa-redo btn-icon"></i>Recommencer
                    </button>
                </div>
                <div class="button-group">
                    <button id="export-btn" class="btn" aria-label="Exporter les r√©sultats">
                        <i class="fas fa-download btn-icon"></i>Exporter
                    </button>
                    <button id="print-btn" class="btn" aria-label="Imprimer le certificat">
                        <i class="fas fa-print btn-icon"></i>Imprimer
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <a href="https://www.testyourfrench.com" class="footer-logo" target="_blank">Test Your French</a>
            <p class="footer-text">Made by Test Your French - Am√©liorez votre fran√ßais d√®s aujourd'hui !</p>
        </div>
    </footer>

    <script>
        // Configuration des questions du quiz
        const quizQuestions = [
            {
                question: "How do you say \"My name is\"? (informal)",
                options: ["Je m'appelle", "Je viens vous", "J'ai le nomm√©", "J'ai une montre"],
                correctAnswer: "Je m'appelle",
                explanation: "Literally, \"I call myself\"."
            },
            {
                question: "How do you say \"I'm from New Orleans\"?",
                options: ["J'aime la Nouvelle-Orl√©ans.", "Je habiter Nouvelle-Orl√©ans.", "Je viens de la Nouvelle-Orl√©ans.", "All of the above"],
                correctAnswer: "Je viens de la Nouvelle-Orl√©ans.",
                explanation: "This is the most natural and idiomatic way to say \"I am from New Orleans\" in French. The verb \"venir de\" (to come from) is commonly used to express origin or birthplace.<br><br>\"J'aime la Nouvelle-Orl√©ans\" means \"I love New Orleans.\" This phrase doesn't accurately convey the meaning of \"being from\" a place.<br><br>\"Je habiter √† la Nouvelle-Orl√©ans\" means \"I to inhabit at New Orleans.\" This phrase is not grammatically correct and sounds awkward."
            },
            {
                question: "How do you say \"You're welcome\"?",
                options: ["De rien", "Avec plaisir", "Je vous en prie", "All of the above"],
                correctAnswer: "All of the above",
                explanation: "<strong>All the answers are correct.</strong><br><br>\"De rien\" is the most common and casual way to say you're welcome, and it literally means \"it's nothing\".<br><br>\"Avec plaisir\" means with pleasure, and it's a friendly and enthusiastic way to say \"you're welcome\".<br><br>\"Je vous en prie\" is a formal and polite way to say you're welcome, and it literally means \"I beg of you\".<br><br><strong>Cultural insight</strong> for \"je vous en prie\": its roots lie in the Middle Ages, likely emerging around the 13th-14th centuries. Back then, \"prier\" (to pray) wasn't just about requesting or begging, it also carried a strong sense of expressing reverence and devotion."
            },
            {
                question: "How do you say \"Good evening\"? (as a hello)",
                options: ["Bonne nuit", "Bonsoir", "Bon apr√®s-midi", "Bonne soir√©e"],
                correctAnswer: "Bonsoir",
                explanation: "\"Bonsoir\" is the correct way to say good evening in French.<br><br>\"Bonne nuit\" means good night, and it's used when you're going to bed or leaving someone for the night.<br><br>\"Bon apr√®s-midi\" means good afternoon.<br><br>\"Bonne soir√©e\" means \"have a good evening\" and specifically conveys the hope that someone has a pleasant evening ahead."
            },
            {
                question: "How do you say \"How are you doing\"? (formal)",
                options: ["Comment allez-vous ?", "√áa boom ?", "C'est beau la vie ?", "All of the above"],
                correctAnswer: "Comment allez-vous ?",
                explanation: "\"Comment allez-vous ?\" is the formal and polite way to ask, and it's used with strangers, acquaintances, or superiors.<br><br>\"√áa boom ?\" is very casual and a bit outdated (not formal).<br><br>\"C'est beau la vie ?\" is informal and friendly, and it's used with friends."
            },
            {
                question: "Listen to this. What is she saying?",
                options: ["Tu viens chez moi ?", "Tu vas loin ?", "Tu viens d'o√π ?", "Tu tiens ton chien ?"],
                correctAnswer: "Tu viens d'o√π ?",
                explanation: "<strong>\"Tu viens d'o√π ?\"</strong> <em>(Where are you from?)</em>",
                audio: "TYF_Lead_6.mp3"
            },
            {
                question: "Listen to this. What is she saying?",
                options: ["Tu es √©tudiant ?", "Tu pars o√π ?", "Tu √©tudies √† l'universit√© ?", "Tu as √©tudi√© o√π ?"],
                correctAnswer: "Tu as √©tudi√© o√π ?",
                explanation: "<strong>\"Tu as √©tudi√© o√π ?\"</strong> <em>(Where did you study?)</em>",
                audio: "TYF_Lead_7.mp3"
            },
            {
                question: "Bonjour, c'est la premi√®re fois que je viens. Je ________ ? (fill the blank)",
                options: ["veux vous boire la verre ?", "vois la musique est bonne ?", "peux m'asseoir ici", "vous excuse pas du tout ?"],
                correctAnswer: "peux m'asseoir ici",
                explanation: "<strong>\"Bonjour, c'est la premi√®re fois que je viens. Je peux m'asseoir ici ?\"</strong><br><em>(Hello, this is my first time here. May I sit here?)</em><br><br>The other options are not grammatically correct."
            },
            {
                question: "Excusez-moi, je tourne en rond. ___ ? (fill the blank)",
                options: ["Pouvez-vous m'indiquer le chemin pour le Louvre s'il vous plait", "Montrez chemin mus√©e sur carte.", "Je veux Louvre maintenant.", "All of the above"],
                correctAnswer: "Pouvez-vous m'indiquer le chemin pour le Louvre s'il vous plait",
                explanation: "<strong>\"Excusez-moi, je tourne en rond. Pouvez-vous m'indiquer le chemin pour le Louvre s'il vous plait ?\"</strong><br><em>(Excuse me, I'm going round in circles/I'm lost. Could you please show me the way to the Louvre?)</em><br><br>It's the only sentence that is correct grammatically and that is polite and accurate.<br><br>\"Montrez chemin mus√©e carte.\" This is not a question, but rather a request with a list of words and this does not specify which museum.<br><br>\"Je veux Louvre maintenant.\" It doesn't explicitly ask someone to provide guidance on how to get there and it sounds rude.<br><br><strong>Tip:</strong> in France, it is always best to say \"s'il vous plait\" in all your interactions."
            },
            {
                question: "________ m'inscrire √† ce cours. (fill the blank)",
                options: ["Je suis en voiture", "Tu veux le v√©lo pour", "Je cherche un lapin", "Bonjour, j'aimerais"],
                correctAnswer: "Bonjour, j'aimerais",
                explanation: "<strong>\"Bonjour, j'aimerais m'inscrire √† ce cours.\"</strong><br><em>(Hello, I would like to register for this course.)</em><br><br>In French, we use the conditional of \"vouloir\" (to want) to ask for something politely.<br>Example: I would like a coffee."
            }
        ];

        // √âtat du quiz
        let currentQuestion = 0;
        let score = 0;
        let selectedAnswers = [];
        let questionStatus = []; // √âtat de chaque question: null, 'correct', 'incorrect'
        let questionTimes = []; // Temps pour chaque question
        let startTime = null; // Temps de d√©part
        let timerEnabled = true; // Timer activ√© par d√©faut
        let timerInterval = null; // Intervalle du timer
        let totalTime = 0; // Temps total

        // √âl√©ments DOM - Regroup√©s par fonctionnalit√©
        const DOM = {
            screens: {
                welcome: document.getElementById('welcome-screen'),
                quiz: document.getElementById('quiz-screen'),
                result: document.getElementById('result')
            },
            quiz: {
                container: document.getElementById('quiz'),
                feedback: document.getElementById('feedback'),
                progress: {
                    bar: document.getElementById('progress'),
                    steps: document.getElementById('progress-steps')
                },
                timer: {
                    container: document.getElementById('timer-display'),
                    value: document.getElementById('timer-value'),
                    toggle: document.getElementById('timer-toggle'),
                    checkbox: document.getElementById('enable-timer')
                }
            },
            results: {
                score: document.getElementById('score'),
                totalQuestions: document.getElementById('total-questions'),
                message: document.getElementById('score-message'),
                summary: document.getElementById('answers-summary'),
                stats: {
                    accuracy: document.getElementById('accuracy'),
                    avgTime: document.getElementById('avg-time'),
                    fastestAnswer: document.getElementById('fastest-answer'),
                    slowestAnswer: document.getElementById('slowest-answer')
                },
                certificate: {
                    container: document.getElementById('certificate'),
                    score: document.getElementById('certificate-score'),
                    total: document.getElementById('certificate-total'),
                    date: document.getElementById('certificate-date'),
                    name: document.getElementById('participant-name')
                },
                shareText: document.getElementById('share-text')
            },
            buttons: {
                start: document.getElementById('start-btn'),
                prev: document.getElementById('prev-btn'),
                next: document.getElementById('next-btn'),
                submit: document.getElementById('submit-btn'),
                restart: document.getElementById('restart-btn'),
                export: document.getElementById('export-btn'),
                print: document.getElementById('print-btn'),
                copy: document.getElementById('copy-btn')
            },
            questionCount: document.getElementById('question-count')
        };

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser l'√©cran d'accueil
            DOM.questionCount.textContent = quizQuestions.length;
            
            // Initialiser les tableaux
            initializeArrays();
            
            // Configurer les √©couteurs d'√©v√©nements
            setupEventListeners();
            
            // Supprimer les classes d'animation apr√®s leur ex√©cution pour √©viter les probl√®mes de performance
            document.querySelectorAll('.fade-in').forEach(el => {
                el.addEventListener('animationend', () => {
                    el.classList.remove('fade-in');
                });
            });
        });

        // Initialise les tableaux d'√©tat
        function initializeArrays() {
            selectedAnswers = Array(quizQuestions.length).fill(null);
            questionStatus = Array(quizQuestions.length).fill(null);
            questionTimes = Array(quizQuestions.length).fill(0);
        }

        // Configure tous les √©couteurs d'√©v√©nements
        function setupEventListeners() {
            // Boutons principaux
            DOM.buttons.start.addEventListener('click', initQuiz);
            DOM.buttons.prev.addEventListener('click', goToPreviousQuestion);
            DOM.buttons.next.addEventListener('click', goToNextQuestion);
            DOM.buttons.submit.addEventListener('click', showResults);
            DOM.buttons.restart.addEventListener('click', restartQuiz);
            DOM.buttons.export.addEventListener('click', exportResults);
            DOM.buttons.print.addEventListener('click', printResults);
            
            // Timer
            DOM.quiz.timer.toggle.addEventListener('click', toggleTimer);
            DOM.quiz.timer.checkbox.addEventListener('change', (e) => {
                timerEnabled = e.target.checked;
            });
            
            // Copier le texte
            DOM.buttons.copy.addEventListener('click', copyShareText);
        }

        // D√©marre le quiz
        function initQuiz() {
            // R√©initialiser les variables
            currentQuestion = 0;
            score = 0;
            initializeArrays();
            
            // D√©marrer le timer si activ√©
            if (timerEnabled) {
                startTimer();
                DOM.quiz.timer.container.classList.remove('hidden');
            } else {
                DOM.quiz.timer.container.classList.add('hidden');
            }
            
            // Afficher la premi√®re question
            showQuestion();
            
            // Cr√©er les √©tapes de progression
            createProgressSteps();
            
            // Mettre √† jour la barre de progression
            updateProgressBar();
            
            // Transition des √©crans avec animation
            DOM.screens.welcome.classList.add('fade-out');
            
            setTimeout(() => {
                DOM.screens.welcome.classList.add('hidden');
                DOM.screens.quiz.classList.remove('hidden');
                DOM.screens.quiz.classList.add('fade-in');
                DOM.screens.result.style.display = 'none';
            }, 300);
            
            // R√©initialiser les boutons
            DOM.buttons.prev.disabled = true;
            DOM.buttons.next.style.display = 'inline-block';
            DOM.buttons.next.disabled = true;
            DOM.buttons.submit.style.display = 'none';
        }

        // Fonctions du timer
        function startTimer() {
            if (!timerEnabled) return;
            
            startTime = new Date();
            totalTime = 0;
            
            for (let i = 0; i < questionTimes.length; i++) {
                questionTimes[i] = 0;
            }
            
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }
        
        function stopTimer() {
            clearInterval(timerInterval);
        }
        
        function updateTimerDisplay() {
            if (!timerEnabled) return;
            
            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);
            
            const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
            const seconds = (elapsedTime % 60).toString().padStart(2, '0');
            
            DOM.quiz.timer.value.textContent = `${minutes}:${seconds}`;
        }
        
        function recordQuestionTime() {
            if (!timerEnabled || startTime === null) return;
            
            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);
            
            questionTimes[currentQuestion] = elapsedTime;
            startTime = currentTime; // R√©initialiser pour la question suivante
        }
        
        function toggleTimer() {
            const timerContainer = DOM.quiz.timer.container;
            
            if (timerContainer.classList.contains('timer-hidden')) {
                timerContainer.classList.remove('timer-hidden');
                DOM.quiz.timer.toggle.innerHTML = '<i class="fas fa-eye-slash"></i>';
                DOM.quiz.timer.toggle.setAttribute('aria-label', 'Masquer le chronom√®tre');
            } else {
                timerContainer.classList.add('timer-hidden');
                DOM.quiz.timer.toggle.innerHTML = '<i class="fas fa-eye"></i>';
                DOM.quiz.timer.toggle.setAttribute('aria-label', 'Afficher le chronom√®tre');
            }
        }

        // Cr√©e les √©tapes de progression
        function createProgressSteps() {
            DOM.quiz.progress.steps.innerHTML = '';
            
            for (let i = 0; i < quizQuestions.length; i++) {
                const step = document.createElement('div');
                step.className = 'step';
                step.textContent = i + 1;
                step.setAttribute('aria-label', `Question ${i + 1}`);
                
                if (i === currentQuestion) {
                    step.classList.add('active');
                    step.setAttribute('aria-current', 'true');
                } else if (questionStatus[i] === 'correct') {
                    step.classList.add('completed');
                    step.setAttribute('aria-label', `Question ${i + 1} - Correcte`);
                } else if (questionStatus[i] === 'incorrect') {
                    step.classList.add('error');
                    step.setAttribute('aria-label', `Question ${i + 1} - Incorrecte`);
                }
                
                DOM.quiz.progress.steps.appendChild(step);
            }
        }

        // Affiche la question actuelle
        function showQuestion() {
            const question = quizQuestions[currentQuestion];
            
            // Cr√©er le HTML pour la question
            let questionHTML = `
                <div class="question-container fade-in">
                    <h2>Question ${currentQuestion + 1} sur ${quizQuestions.length}</h2>
                    <p class="question-text">${question.question}</p>
            `;
            
            // Ajouter l'audio si disponible
            if (question.audio) {
                questionHTML += `
                    <div class="audio-container">
                        <audio controls>
                            <source src="${question.audio}" type="audio/mpeg">
                            Votre navigateur ne supporte pas l'√©l√©ment audio.
                        </audio>
                    </div>
                `;
            }
            
            questionHTML += `<div class="options" role="radiogroup" aria-labelledby="question-${currentQuestion + 1}">`;
            
            // Ajouter les options
            question.options.forEach((option, index) => {
                const isSelected = selectedAnswers[currentQuestion] === option;
                let additionalClass = isSelected ? 'selected' : '';
                
                // Ajouter les classes correct/incorrect si la question a √©t√© r√©pondue
                if (isSelected && questionStatus[currentQuestion]) {
                    additionalClass += questionStatus[currentQuestion] === 'correct' ? ' correct' : ' incorrect';
                }
                
                questionHTML += `
                    <div class="option ${additionalClass}" 
                         data-index="${index}" 
                         role="radio" 
                         aria-checked="${isSelected ? 'true' : 'false'}"
                         tabindex="0">
                        ${option}
                    </div>
                `;
            });
            
            questionHTML += `
                    </div>
                </div>
            `;
            
            // Afficher la question
            DOM.quiz.container.innerHTML = questionHTML;
            
            // Vider le conteneur de feedback
            DOM.quiz.feedback.classList.remove('visible');
            DOM.quiz.feedback.innerHTML = '';
            
            // R√©afficher le feedback si la question a d√©j√† √©t√© r√©pondue
            if (selectedAnswers[currentQuestion] && questionStatus[currentQuestion]) {
                updateFeedback();
            }
            
            // Ajouter les √©couteurs d'√©v√©nements aux options
            attachOptionEventListeners();
            
            // Mettre √† jour l'interface
            updateButtons();
            updateProgressBar();
            createProgressSteps();
            
            // Accessibilit√©: focus sur la premi√®re option
            setTimeout(() => {
                const firstOption = document.querySelector('.option');
                if (firstOption) firstOption.focus();
            }, 500);
        }

        // Attache les √©couteurs d'√©v√©nements aux options
        function attachOptionEventListeners() {
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                // Clic souris
                option.addEventListener('click', selectOption);
                
                // Accessibilit√© clavier
                option.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        selectOption({ target: option });
                    }
                });
            });
        }

        // Met √†
